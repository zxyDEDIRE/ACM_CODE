/*ÔºÅ*/
#pragma GCC optimize(2)
#pragma GCC optimize(3,"Ofast","inline")
#include<bits/stdc++.h>
using namespace std;
#define endl "\n"
#define pp(x) array<int,x>
using ull=unsigned long long;
using ll=long long;
using pii=pair<int,int>;
using pdd=pair<double,double>;
const int dx[]={0,0,1,-1,1,-1,1,-1};
const int dy[]={1,-1,0,0,1,-1,-1,1};
const int mod=998244353;
const int inf=0x3f3f3f3f;
const int INF=1e9+7;
const int maxn=1e6+100;
const int N=444;
vector<string>u;
bool _ok[444];
int cnt[N];
char vis[N];
int len[N];
string p[N];
int n;
ll ans;
bool check(int x)
{
	for(int i=0;i<(int)u[x].size();i++)
		if(u[x][i]!='?'&&vis[i]!='?'&&u[x][i]!=vis[i])
			return 0;
	return 1;
}
void dfs(int x,int t,int fl,int ok)
{
	if(x==t+1)
	{
		if(ok==0)return ;
		ll now=1;
		for(int i=0;i<(int)u[t].size();i++)
			if(vis[i]=='?')now=(now*2)%mod;
		ans=((ans+fl*now)%mod+mod)%mod;
		// cout<<ans<<" "<<now*fl<<endl;
		return ;
	}
	int T=check(x);
	if(T)
	{
		for(int i=0;i<(int)u[x].size();i++)
			if(u[x][i]!='?'){
				if(vis[i]!=u[x][i])cnt[i]=0;
				vis[i]=u[x][i];
				cnt[i]++;
			}
		dfs(x+1,t,-fl,1);
		for(int i=0;i<(int)u[x].size();i++)
			if(u[x][i]!='?'){
				cnt[i]--;
				if(cnt[i]==0)vis[i]='?';
			}
	}
	dfs(x+1,t,fl,ok);
}
void solve()
{
	cin>>n;
	
	for(int i=1;i<=n;i++)
	{
		cin>>p[i];
		len[i]=p[i].size();
	}	
	for(int i=1;i<=n;i++)
	{
		int flag=0;
		for(int j=1;j<=n;j++)
		{
			if(_ok[j])continue;
			if(i==j)continue;
			if(len[i]!=len[j])continue;
			int ok=1;
			for(int k=0;k<len[i];k++)
			{
				if(p[i][k]!='?'&&p[j][k]!='?'&&p[i][k]!=p[j][k]){ok=0;break;}
				if(p[j][k]!='?'&&p[j][k]!=p[i][k]){ok=0;break;}
			}
			if(ok){
				flag=1;
				break;
			}
		}
		if(flag)_ok[i]=1;
		if(flag)continue;
		u.push_back(p[i]);
	}
	sort(u.begin(),u.end(),[&](string&a,string&b){
		 if(a.size()!=b.size())
            return a.size()<b.size();
        else return a<b;
	});

	// cout<<endl;
	// cout<<u.size()<<endl;
	// for(auto x:u)
	// 	cout<<x<<" "<<endl;
	// cout<<endl;

	int l=0;
	ll res=0;
	for(int i=0;i<(int)u.size();i++)
	{
		if(i+1==u.size()||u[i+1].size()!=u[i].size())
		{
			for(int j=0;j<=400;j++)
				vis[j]='?',cnt[j]=0;
			// cout<<"L "<<l<<" R "<<i<<endl;
			ans=0;
			dfs(l,i,-1,0);
			l=i+1;
			res=(res+ans)%mod;
			res=(res+mod)%mod;
			// cout<<ans<<endl;
		}
	}
	cout<<res<<endl;

}
signed main(){
 // freopen("in.txt","r",stdin);
 // freopen("out.txt","w",stdout); 
	ios::sync_with_stdio(false);
	cin.tie(nullptr);cout.tie(nullptr);
	// int __;cin>>__;
	// while(__--)
		solve();
//  fclose(stdin);
 // fclose(stdout);
	return 0;
}
/*

20
1?01?1
0110?0
1?       sdfsdf
?1??
00??
?10     sdfsdf
111???1
?1100?11
?011
??1
?101110
?1?
??
100
??1    sdfsd
0
00?
11???
01?01?0
000       sdf

0  1
??  4
00?
100
?1?
??1
00??
?011
?1??
11???
0110?0
1?01?1
01?01?0
111???1
?101110
?1100?11

20
????????????1???????
?1??????????????????
??1?????????????????
???1????????0???????
????1???????????????
?????1??????????????
??????1??????1??????
???????1???0?1??????
????????1???????????
?????????1??1???????
???0??????1?????????
???????????1????????
?????1??????1???????
?1????0??????1??????
??????????????1?????
???0???0???????1????
??????1????0????1???
?????????????????1??
??????????1??1????1?
???????????????????1

2
?1?
?1?

1+4+8+13+8+6+14+4
21 29 35 49 53 + 5

*/